---

- name: Bootstrap | CentOS | Check presence of fastestmirror.conf
  stat:
    path: /etc/yum/pluginconf.d/fastestmirror.conf
  register: fastestmirror
  when: bootstrap_os == "centos"

# fastestmirror plugin actually slows down Ansible deployments
- name:  Bootstrap | CentOS | Disable fastestmirror plugin
  lineinfile:
    dest: /etc/yum/pluginconf.d/fastestmirror.conf
    regexp: "^enabled=.*"
    line: "enabled=0"
    state: present
  when: 
    - fastestmirror.stat.exists
    - bootstrap_os == "centos"

- name:  Bootstrap | CentOS | Install packages requirements for bootstrap
  yum:
    name: libselinux-python
    state: present
  when: bootstrap_os == "centos"
